<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contactos FRIOR S.L.</title>
  <link rel="stylesheet" href="style.css" />
  <script defer src="script.js"></script>
</head>
<body>
  <header>
    <img src="logo.png" alt="Logo FRIOR" class="logo" />
    <h1>Contactos FRIOR S.L.</h1>
    <div id="admin-login" class="admin-login">
      <button onclick="toggleLogin()">üîí</button>
      <div id="login-form" class="hidden">
        <input type="text" id="admin-user" placeholder="Usuario" />
        <input type="password" id="admin-pass" placeholder="Contrase√±a" />
        <button onclick="loginAdmin()">Entrar</button>
      </div>
    </div>
  </header>

  <main>
    <div class="filters">
      <input type="text" id="search-name" placeholder="Buscar por nombre" oninput="filterContacts()" />
      <input type="text" id="search-position" placeholder="Buscar por cargo" oninput="filterContacts()" />
      <input type="text" id="search-location" placeholder="Buscar por ubicaci√≥n" oninput="filterContacts()" />
    </div>

    <div id="admin-actions" class="hidden">
      <button onclick="importExcel()">üì• Importar Excel</button>
      <button onclick="exportExcel()">üì§ Exportar Excel</button>
      <button onclick="showAddForm()">‚ûï Agregar Contacto</button>
    </div>

    <div id="add-contact-form" class="hidden">
      <h3>Nuevo Contacto</h3>
      <input type="text" id="new-name" placeholder="Nombre" />
      <input type="text" id="new-phone" placeholder="Tel√©fono" />
      <input type="email" id="new-email" placeholder="Correo" />
      <input type="text" id="new-position" placeholder="Cargo" />
      <input type="text" id="new-location" placeholder="Ubicaci√≥n" />
      <button onclick="addContact()">Guardar</button>
    </div>

    <table id="contacts-table">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Tel√©fono</th>
          <th>Correo</th>
          <th>Cargo</th>
          <th>Ubicaci√≥n</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody id="contacts-body">
        <!-- Contactos cargados din√°micamente -->
      </tbody>
    </table>
  </main>

  <script>
    let isAdmin = false;

    function toggleLogin() {
      document.getElementById('login-form').classList.toggle('hidden');
    }

    function loginAdmin() {
      const user = document.getElementById('admin-user').value;
      const pass = document.getElementById('admin-pass').value;
      if (user === 'adminfrior' && pass === 'frior2025') {
        isAdmin = true;
        document.getElementById('admin-actions').classList.remove('hidden');
        alert('Has iniciado sesi√≥n como administrador.');
        showEditableFields();
      } else {
        alert('Usuario o contrase√±a incorrectos.');
      }
    }

    function showEditableFields() {
      const rows = document.querySelectorAll('#contacts-body tr');
      rows.forEach(row => {
        const actionsCell = row.querySelector('.actions');
        if (actionsCell) {
          actionsCell.innerHTML = `
            <button onclick="editContact(this)">‚úèÔ∏è</button>
            <button onclick="deleteContact(this)">üóëÔ∏è</button>
          `;
        }
      });
    }

    function addContact() {
      const name = document.getElementById('new-name').value;
      const phone = document.getElementById('new-phone').value;
      const email = document.getElementById('new-email').value;
      const position = document.getElementById('new-position').value;
      const location = document.getElementById('new-location').value;

      const tbody = document.getElementById('contacts-body');
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${name}</td>
        <td>${phone}</td>
        <td>${email}</td>
        <td>${position}</td>
        <td>${location}</td>
        <td class="actions">${isAdmin ? '<button onclick="editContact(this)">‚úèÔ∏è</button> <button onclick="deleteContact(this)">üóëÔ∏è</button>' : ''}</td>
      `;
      tbody.appendChild(row);
    }

    function editContact(btn) {
      if (!isAdmin) return;
      const row = btn.closest('tr');
      const cells = row.querySelectorAll('td');
      cells.forEach((cell, i) => {
        if (i < 5) {
          const val = cell.textContent;
          cell.innerHTML = `<input type="text" value="${val}" />`;
        }
      });
      btn.textContent = 'üíæ';
      btn.onclick = () => saveEdit(row, btn);
    }

    function saveEdit(row, btn) {
      const inputs = row.querySelectorAll('td input');
      inputs.forEach(input => {
        const td = input.parentElement;
        td.textContent = input.value;
      });
      btn.textContent = '‚úèÔ∏è';
      btn.onclick = () => editContact(btn);
    }

    function deleteContact(btn) {
      if (confirm('¬øEliminar este contacto?')) {
        btn.closest('tr').remove();
      }
    }
  </script>
</body>
</html>

